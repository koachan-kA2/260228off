<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2.28 „Ç™„Éï‰ºö - JRÁµåË∑ØÊ§úÁ¥¢</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700;900&family=Shippori+Mincho:wght@600&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'M PLUS Rounded 1c', sans-serif;
        }
        
        body {
            background: linear-gradient(to bottom right, #fff7ed, #fef3c7, #fce7f3);
            min-height: 100vh;
        }
        
        .heading-font {
            font-family: 'Shippori Mincho', serif;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes bounce-in {
            0% {
                opacity: 0;
                transform: scale(0.3);
            }
            50% {
                opacity: 1;
                transform: scale(1.05);
            }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); }
        }
        
        @keyframes slide-in-left {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .float-animation {
            animation: float 3s ease-in-out infinite;
        }
        
        .bounce-in {
            animation: bounce-in 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        .slide-in-left {
            animation: slide-in-left 0.5s ease-out forwards;
        }
        
        .ticket-card {
            background: linear-gradient(135deg, #fff 0%, #fefefe 100%);
            border: 3px dashed #ff6b9d;
            position: relative;
            overflow: hidden;
        }
        
        .ticket-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #ff6b9d, #ffd93d, #6bcf7f, #4d96ff);
            z-index: -1;
            border-radius: 1rem;
            opacity: 0.3;
        }
        
        .tab-button {
            transition: all 0.3s;
            position: relative;
            flex: 1;
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            font-weight: bold;
            border: none;
            background: transparent;
            cursor: pointer;
            color: #4b5563;
        }
        
        .tab-button:hover {
            background: #f9fafb;
        }
        
        .tab-button.active {
            background: linear-gradient(to right, #fce7f3, #fed7aa);
            color: #be185d;
        }
        
        .tab-button.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(to right, #ff6b9d, #ffd93d);
            border-radius: 3px;
        }
        
        .route-line-segment {
            position: relative;
            padding-left: 30px;
        }
        
        .route-line-segment::before {
            content: '';
            position: absolute;
            left: 10px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(to bottom, #4d96ff, #6bcf7f);
        }
        
        .route-line-segment::after {
            content: '';
            position: absolute;
            left: 6px;
            top: 50%;
            transform: translateY(-50%);
            width: 11px;
            height: 11px;
            background: white;
            border: 3px solid #4d96ff;
            border-radius: 50%;
        }
        
        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }
        
        select, input[type="text"] {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 3px solid #fbcfe8;
            border-radius: 0.75rem;
            font-weight: 500;
            background: white;
            font-size: 1rem;
        }
        
        select:focus, input[type="text"]:focus {
            outline: none;
            border-color: #ec4899;
            box-shadow: 0 10px 20px -5px rgba(236, 72, 153, 0.2);
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .badge {
            display: inline-block;
            position: absolute;
            top: -0.25rem;
            right: -0.25rem;
            width: 1.5rem;
            height: 1.5rem;
            background: #ef4444;
            color: white;
            font-size: 0.75rem;
            border-radius: 9999px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Èñ¢Êù±„ÅÆJR‰∏ªË¶ÅÈßÖ„Éá„Éº„Çø
        const JR_STATIONS = {
            'Â±±ÊâãÁ∑ö': ['Êù±‰∫¨', 'ÊúâÊ•ΩÁî∫', 'Êñ∞Ê©ã', 'ÊµúÊùæÁî∫', 'Áî∞Áî∫', 'ÂìÅÂ∑ù', 'Â§ßÂ¥é', '‰∫îÂèçÁî∞', 'ÁõÆÈªí', 'ÊÅµÊØîÂØø', 'Ê∏ãË∞∑', 'ÂéüÂÆø', '‰ª£„ÄÖÊú®', 'Êñ∞ÂÆø', 'Êñ∞Â§ß‰πÖ‰øù', 'È´òÁî∞È¶¨Â†¥', 'ÁõÆÁôΩ', 'Ê±†Ë¢ã', 'Â§ßÂ°ö', 'Â∑£È¥®', 'ÈßíËæº', 'Áî∞Á´Ø', 'Ë•øÊó•ÊöÆÈáå', 'Êó•ÊöÆÈáå', 'È∂ØË∞∑', '‰∏äÈáé', 'Âæ°ÂæíÁî∫', 'ÁßãËëâÂéü', 'Á•ûÁî∞'],
            '‰∏≠Â§ÆÁ∑ö': ['Êù±‰∫¨', 'Á•ûÁî∞', 'Âæ°Ëå∂„ÉéÊ∞¥', 'Ê∞¥ÈÅìÊ©ã', 'È£ØÁî∞Ê©ã', 'Â∏Ç„É∂Ë∞∑', 'Âõõ„ÉÑË∞∑', '‰ø°ÊøÉÁî∫', 'ÂçÉÈßÑ„Ç±Ë∞∑', '‰ª£„ÄÖÊú®', 'Êñ∞ÂÆø', 'Â§ß‰πÖ‰øù', 'Êù±‰∏≠Èáé', '‰∏≠Èáé', 'È´òÂÜÜÂØ∫', 'Èòø‰Ωê„É∂Ë∞∑', 'ËçªÁ™™', 'Ë•øËçªÁ™™', 'ÂêâÁ••ÂØ∫', '‰∏âÈ∑π', 'Ê≠¶ËîµÂ¢É', 'Êù±Â∞èÈáë‰∫ï', 'Ê≠¶ËîµÂ∞èÈáë‰∫ï', 'ÂõΩÂàÜÂØ∫', 'Ë•øÂõΩÂàÜÂØ∫', 'ÂõΩÁ´ã', 'Á´ãÂ∑ù', 'Êó•Èáé', 'Ë±äÁî∞', 'ÂÖ´ÁéãÂ≠ê'],
            'Á∑èÊ≠¶Á∑ö': ['Êù±‰∫¨', 'Êñ∞Êó•Êú¨Ê©ã', 'È¶¨Âñ∞Áî∫', 'Èå¶Á≥∏Áî∫', '‰∫ÄÊà∏', 'Âπ≥‰∫ï', 'Êñ∞Â∞èÂ≤©', 'Â∞èÂ≤©', 'Â∏ÇÂ∑ù', 'Êú¨ÂÖ´Âπ°', '‰∏ãÁ∑è‰∏≠Â±±', 'Ë•øËàπÊ©ã', 'ËàπÊ©ã', 'Êù±ËàπÊ©ã', 'Ê¥•Áî∞Ê≤º', 'ÂπïÂºµÊú¨ÈÉ∑', 'ÂπïÂºµ', 'Êñ∞Ê§úË¶ãÂ∑ù', 'Á®≤ÊØõ', 'Ë•øÂçÉËëâ', 'ÂçÉËëâ'],
            '‰∫¨ÊµúÊù±ÂåóÁ∑ö': ['Â§ßÂÆÆ', '„Åï„ÅÑ„Åü„ÅæÊñ∞ÈÉΩÂøÉ', '‰∏éÈáé', 'ÂåóÊµ¶Âíå', 'Êµ¶Âíå', 'ÂçóÊµ¶Âíå', 'Ëï®', 'Ë•øÂ∑ùÂè£', 'Â∑ùÂè£', 'Ëµ§ÁæΩ', 'Êù±ÂçÅÊù°', 'ÁéãÂ≠ê', '‰∏ä‰∏≠Èáå', 'Áî∞Á´Ø', 'Ë•øÊó•ÊöÆÈáå', 'Êó•ÊöÆÈáå', 'È∂ØË∞∑', '‰∏äÈáé', 'Âæ°ÂæíÁî∫', 'ÁßãËëâÂéü', 'Á•ûÁî∞', 'Êù±‰∫¨', 'ÊúâÊ•ΩÁî∫', 'Êñ∞Ê©ã', 'ÊµúÊùæÁî∫', 'Áî∞Áî∫', 'È´òËº™„Ç≤„Éº„Éà„Ç¶„Çß„Ç§', 'ÂìÅÂ∑ù', 'Â§ß‰∫ïÁî∫', 'Â§ßÊ£Æ', 'Ëí≤Áî∞', 'Â∑ùÂ¥é', 'È∂¥Ë¶ã', 'Êñ∞Â≠êÂÆâ', 'Êù±Á•ûÂ•àÂ∑ù', 'Ê®™Êµú', 'Ê°úÊú®Áî∫', 'Èñ¢ÂÜÖ', 'Áü≥Â∑ùÁî∫', 'Â±±Êâã', 'Ê†πÂ≤∏', 'Á£ØÂ≠ê', 'Êñ∞ÊùâÁî∞', 'Ê¥ãÂÖâÂè∞', 'Ê∏ØÂçóÂè∞', 'Êú¨ÈÉ∑Âè∞', 'Â§ßËàπ'],
            'Âüº‰∫¨Á∑ö': ['Â§ßÂÆÆ', '„Åï„ÅÑ„Åü„ÅæÊñ∞ÈÉΩÂøÉ', '‰∏éÈáéÊú¨Áî∫', 'ÂåóÊà∏Áî∞', 'Êà∏Áî∞ÂÖ¨Âúí', 'Êà∏Áî∞', 'ÊµÆÈñìËàüÊ∏°', 'ÂåóËµ§ÁæΩ', 'Ëµ§ÁæΩ', 'ÂçÅÊù°', 'ÊùøÊ©ã', 'Ê±†Ë¢ã', 'Êñ∞ÂÆø', 'Ê∏ãË∞∑', 'ÊÅµÊØîÂØø', 'Â§ßÂ¥é'],
            'ÊπòÂçóÊñ∞ÂÆø„É©„Ç§„É≥': ['Â§ßÂÆÆ', '„Åï„ÅÑ„Åü„ÅæÊñ∞ÈÉΩÂøÉ', 'Êµ¶Âíå', 'Ê≠¶ËîµÊµ¶Âíå', 'Êà∏Áî∞ÂÖ¨Âúí', 'Ëµ§ÁæΩ', 'Ê±†Ë¢ã', 'Êñ∞ÂÆø', 'Ê∏ãË∞∑', 'ÊÅµÊØîÂØø', 'Â§ßÂ¥é', 'Ê≠¶ËîµÂ∞èÊùâ', 'Ê®™Êµú', 'Êà∏Â°ö', 'Â§ßËàπ', 'Ëó§Ê≤¢', 'ËæªÂ†Ç', 'ËåÖ„É∂Â¥é', 'Âπ≥Â°ö', 'ÂõΩÂ∫úÊ¥•', 'Â∞èÁî∞Âéü'],
            'Ê®™È†àË≥ÄÁ∑ö': ['Êù±‰∫¨', 'Êñ∞Ê©ã', 'ÂìÅÂ∑ù', 'Ë•øÂ§ß‰∫ï', 'Ê≠¶ËîµÂ∞èÊùâ', 'Êñ∞Â∑ùÂ¥é', 'Ê®™Êµú', '‰øùÂúü„Ç±Ë∞∑', 'Êù±Êà∏Â°ö', 'Êà∏Â°ö', 'Â§ßËàπ', 'ÂåóÈéåÂÄâ', 'ÈéåÂÄâ', 'ÈÄóÂ≠ê', 'Êù±ÈÄóÂ≠ê', 'Áî∞Êµ¶', 'Ê®™È†àË≥Ä', 'Ë°£Á¨†', '‰πÖÈáåÊµú'],
            'Â∏∏Á£êÁ∑ö': ['‰∏äÈáé', 'Êó•ÊöÆÈáå', '‰∏âÊ≤≥Â≥∂', 'ÂçóÂçÉ‰Ωè', 'ÂåóÂçÉ‰Ωè', 'ÊùæÊà∏', 'Êüè', 'ÊàëÂ≠´Â≠ê', 'ÂèñÊâã'],
        };

        const ALL_STATIONS = [...new Set(Object.values(JR_STATIONS).flat())].sort();

        const PRESET_ROUTES = [
            { name: '‰∫¨ÈÉΩ‚ÜíÊù±‰∫¨ÔºàÊñ∞ÂππÁ∑öÂà∞ÁùÄÔºâ', from: 'Êù±‰∫¨', to: 'Êù±‰∫¨', description: 'ÂèãÈÅî„Çí„ÅäËøé„Åà' },
            { name: 'Êù±‰∫¨‚ÜíÊ±†Ë¢ãÔºàÈõÜÂêàÂ†¥ÊâÄ„Å∏Ôºâ', from: 'Êù±‰∫¨', to: 'Ê±†Ë¢ã', description: 'ÈõÜÂêàÂ†¥ÊâÄ„Åæ„Åß' },
            { name: 'Ê±†Ë¢ã‚ÜíÂéüÂÆøÔºà„Ç™„Éï‰ºö‰ºöÂ†¥„Å∏Ôºâ', from: 'Ê±†Ë¢ã', to: 'ÂéüÂÆø', description: '„Ç™„Éï‰ºö‰ºöÂ†¥„Åæ„Åß' },
        ];

        const calculateFare = (distance) => {
            if (distance <= 3) return 150;
            if (distance <= 6) return 170;
            if (distance <= 10) return 200;
            if (distance <= 15) return 220;
            if (distance <= 20) return 240;
            if (distance <= 25) return 270;
            if (distance <= 30) return 310;
            if (distance <= 35) return 350;
            return 350 + Math.floor((distance - 35) / 5) * 40;
        };

        const calculateRoute = (from, to) => {
            if (from === to) return null;

            // Áõ¥ÈÄöË∑ØÁ∑ö„ÇíÊé¢„Åô
            for (const [lineName, stations] of Object.entries(JR_STATIONS)) {
                const fromIndex = stations.indexOf(from);
                const toIndex = stations.indexOf(to);
                
                if (fromIndex !== -1 && toIndex !== -1) {
                    const stationsBetween = fromIndex < toIndex 
                        ? stations.slice(fromIndex, toIndex + 1)
                        : stations.slice(toIndex, fromIndex + 1).reverse();
                    
                    const distance = Math.abs(toIndex - fromIndex);
                    const fare = calculateFare(distance);
                    const time = 3 + distance * 2.5;
                    
                    return {
                        line: lineName,
                        stations: stationsBetween,
                        distance,
                        fare,
                        time: Math.round(time),
                        transfers: 0,
                        route: [{ line: lineName, stations: stationsBetween }]
                    };
                }
            }
            
            // 1Âõû‰πó„ÇäÊèõ„ÅàÁµåË∑Ø„ÇíÊé¢„Åô
            for (const [line1Name, line1Stations] of Object.entries(JR_STATIONS)) {
                const fromIndex = line1Stations.indexOf(from);
                if (fromIndex === -1) continue;

                for (const transferStation of line1Stations) {
                    for (const [line2Name, line2Stations] of Object.entries(JR_STATIONS)) {
                        if (line1Name === line2Name) continue;
                        
                        const transferIndex1 = line1Stations.indexOf(transferStation);
                        const transferIndex2 = line2Stations.indexOf(transferStation);
                        const toIndex = line2Stations.indexOf(to);
                        
                        if (transferIndex1 !== -1 && transferIndex2 !== -1 && toIndex !== -1) {
                            const segment1 = fromIndex < transferIndex1
                                ? line1Stations.slice(fromIndex, transferIndex1 + 1)
                                : line1Stations.slice(transferIndex1, fromIndex + 1).reverse();
                            
                            const segment2 = transferIndex2 < toIndex
                                ? line2Stations.slice(transferIndex2, toIndex + 1)
                                : line2Stations.slice(toIndex, transferIndex2 + 1).reverse();
                            
                            const distance = Math.abs(transferIndex1 - fromIndex) + Math.abs(toIndex - transferIndex2);
                            const fare = calculateFare(distance);
                            const time = 5 + distance * 2.5 + 5;
                            
                            return {
                                line: `${line1Name} ‚Üí ${line2Name}`,
                                stations: [...segment1, ...segment2.slice(1)],
                                distance,
                                fare,
                                time: Math.round(time),
                                transfers: 1,
                                transferStation,
                                route: [
                                    { line: line1Name, stations: segment1 },
                                    { line: line2Name, stations: segment2 }
                                ]
                            };
                        }
                    }
                }
            }
            
            return {
                line: 'Ë§áÊï∞Ë∑ØÁ∑öÁµåÁî±',
                stations: [from, to],
                distance: 15,
                fare: 280,
                time: 35,
                transfers: 2,
                route: [{ line: 'Ë§áÊï∞Ë∑ØÁ∑öÁµåÁî±', stations: [from, to] }]
            };
        };

        function App() {
            const [fromStation, setFromStation] = useState('');
            const [toStation, setToStation] = useState('');
            const [searchResult, setSearchResult] = useState(null);
            const [savedRoutes, setSavedRoutes] = useState([]);
            const [routeName, setRouteName] = useState('');
            const [activeTab, setActiveTab] = useState('search');

            useEffect(() => {
                const saved = localStorage.getItem('savedRoutes');
                if (saved) {
                    setSavedRoutes(JSON.parse(saved));
                }
            }, []);

            const handleSearch = () => {
                if (fromStation && toStation && fromStation !== toStation) {
                    const route = calculateRoute(fromStation, toStation);
                    if (route) {
                        setSearchResult({ 
                            from: fromStation, 
                            to: toStation, 
                            ...route,
                            searchedAt: new Date().toISOString()
                        });
                    }
                }
            };

            const handleSaveRoute = () => {
                if (searchResult && routeName.trim()) {
                    const newRoute = {
                        ...searchResult,
                        name: routeName,
                        createdAt: new Date().toISOString()
                    };

                    const updated = [...savedRoutes, { ...newRoute, id: Date.now().toString() }];
                    setSavedRoutes(updated);
                    localStorage.setItem('savedRoutes', JSON.stringify(updated));
                    
                    setRouteName('');
                    alert('ÁµåË∑Ø„Çí‰øùÂ≠ò„Åó„Åü„ÇàÔºÅ');
                }
            };

            const handleDeleteRoute = (routeId) => {
                if (confirm('„Åì„ÅÆÁµåË∑Ø„ÇíÂâäÈô§„Åô„ÇãÔºü')) {
                    const updated = savedRoutes.filter(r => r.id !== routeId);
                    setSavedRoutes(updated);
                    localStorage.setItem('savedRoutes', JSON.stringify(updated));
                }
            };

            const handlePresetSelect = (preset) => {
                setFromStation(preset.from);
                setToStation(preset.to);
                setActiveTab('search');
            };

            const totalSavedFare = savedRoutes.reduce((sum, route) => sum + route.fare, 0);

            return (
                <div className="container">
                    {/* „Éò„ÉÉ„ÉÄ„Éº */}
                    <div style={{ textAlign: 'center', marginBottom: '2rem' }} className="bounce-in">
                        <div className="float-animation" style={{ fontSize: '4rem', marginBottom: '1rem' }}>üéâ</div>
                        <h1 className="heading-font" style={{ 
                            fontSize: '3.5rem', 
                            fontWeight: '900',
                            background: 'linear-gradient(to right, #db2777, #f97316, #eab308)',
                            WebkitBackgroundClip: 'text',
                            WebkitTextFillColor: 'transparent',
                            marginBottom: '1rem'
                        }}>
                            2.28 „Ç™„Éï‰ºö
                        </h1>
                        <p style={{ fontSize: '1.25rem', color: '#374151', fontWeight: 'bold' }}>
                            JRÁµåË∑ØÊ§úÁ¥¢ & „Éû„Ç§„Éö„Éº„Ç∏
                        </p>
                    </div>

                    {/* „Çø„Éñ„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ */}
                    <div className="slide-in-left" style={{ 
                        display: 'flex', 
                        gap: '0.5rem', 
                        marginBottom: '1.5rem',
                        background: 'white',
                        borderRadius: '1rem',
                        padding: '0.5rem',
                        boxShadow: '0 10px 15px -3px rgba(0, 0, 0, 0.1)'
                    }}>
                        <button
                            onClick={() => setActiveTab('search')}
                            className={`tab-button ${activeTab === 'search' ? 'active' : ''}`}
                        >
                            üîç ÁµåË∑ØÊ§úÁ¥¢
                        </button>
                        <button
                            onClick={() => setActiveTab('preset')}
                            className={`tab-button ${activeTab === 'preset' ? 'active' : ''}`}
                        >
                            ‚ö° „ÇØ„Ç§„ÉÉ„ÇØÊ§úÁ¥¢
                        </button>
                        <button
                            onClick={() => setActiveTab('saved')}
                            className={`tab-button ${activeTab === 'saved' ? 'active' : ''}`}
                            style={{ position: 'relative' }}
                        >
                            üíæ ‰øùÂ≠òÊ∏à„Åø
                            {savedRoutes.length > 0 && (
                                <span className="badge">{savedRoutes.length}</span>
                            )}
                        </button>
                    </div>

                    {/* ÁµåË∑ØÊ§úÁ¥¢„Çø„Éñ */}
                    {activeTab === 'search' && (
                        <div>
                            <div className="ticket-card bounce-in" style={{ 
                                borderRadius: '1rem', 
                                padding: '2rem',
                                boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.25)',
                                marginBottom: '1.5rem'
                            }}>
                                <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', marginBottom: '1.5rem' }}>
                                    <div style={{ 
                                        width: '3rem', 
                                        height: '3rem',
                                        background: 'linear-gradient(to bottom right, #3b82f6, #06b6d4)',
                                        borderRadius: '9999px',
                                        display: 'flex',
                                        alignItems: 'center',
                                        justifyContent: 'center',
                                        boxShadow: '0 10px 15px -3px rgba(0, 0, 0, 0.1)'
                                    }}>
                                        <span style={{ fontSize: '1.5rem' }}>üöÜ</span>
                                    </div>
                                    <h2 style={{ fontSize: '1.5rem', fontWeight: '900', color: '#1f2937' }}>
                                        JRÁµåË∑ØÊ§úÁ¥¢
                                    </h2>
                                </div>

                                <div style={{ 
                                    display: 'grid', 
                                    gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',
                                    gap: '1rem',
                                    marginBottom: '1.5rem'
                                }}>
                                    <div>
                                        <label style={{ 
                                            display: 'block',
                                            fontSize: '0.875rem',
                                            fontWeight: 'bold',
                                            color: '#374151',
                                            marginBottom: '0.5rem'
                                        }}>
                                            üöâ Âá∫Áô∫ÈßÖ
                                        </label>
                                        <select
                                            value={fromStation}
                                            onChange={(e) => setFromStation(e.target.value)}
                                        >
                                            <option value="">ÈßÖ„ÇíÈÅ∏Êäû„Åó„Å¶„Å≠</option>
                                            {ALL_STATIONS.map(station => (
                                                <option key={station} value={station}>{station}</option>
                                            ))}
                                        </select>
                                    </div>

                                    <div>
                                        <label style={{ 
                                            display: 'block',
                                            fontSize: '0.875rem',
                                            fontWeight: 'bold',
                                            color: '#374151',
                                            marginBottom: '0.5rem'
                                        }}>
                                            üéØ Âà∞ÁùÄÈßÖ
                                        </label>
                                        <select
                                            value={toStation}
                                            onChange={(e) => setToStation(e.target.value)}
                                        >
                                            <option value="">ÈßÖ„ÇíÈÅ∏Êäû„Åó„Å¶„Å≠</option>
                                            {ALL_STATIONS.map(station => (
                                                <option key={station} value={station}>{station}</option>
                                            ))}
                                        </select>
                                    </div>
                                </div>

                                <button
                                    onClick={handleSearch}
                                    disabled={!fromStation || !toStation || fromStation === toStation}
                                    style={{
                                        width: '100%',
                                        background: 'linear-gradient(to right, #ec4899, #f97316, #eab308)',
                                        color: 'white',
                                        padding: '1rem 1.5rem',
                                        borderRadius: '0.75rem',
                                        fontWeight: '900',
                                        fontSize: '1.125rem',
                                        border: 'none',
                                        boxShadow: '0 10px 15px -3px rgba(0, 0, 0, 0.1)',
                                        cursor: 'pointer',
                                        transition: 'all 0.3s'
                                    }}
                                    onMouseOver={(e) => e.target.style.transform = 'scale(1.05)'}
                                    onMouseOut={(e) => e.target.style.transform = 'scale(1)'}
                                >
                                    üîç ÁµåË∑Ø„ÇíÊ§úÁ¥¢„Åô„ÇãÔºÅ
                                </button>
                            </div>

                            {/* Ê§úÁ¥¢ÁµêÊûú */}
                            {searchResult && (
                                <div className="bounce-in">
                                    <div style={{ 
                                        background: 'white',
                                        borderRadius: '1rem',
                                        padding: '1.5rem',
                                        boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.25)',
                                        border: '4px solid #fde047'
                                    }}>
                                        <div style={{ 
                                            display: 'flex', 
                                            justifyContent: 'space-between', 
                                            alignItems: 'center',
                                            marginBottom: '1.5rem'
                                        }}>
                                            <h3 style={{ fontSize: '1.5rem', fontWeight: '900', color: '#1f2937' }}>
                                                Ê§úÁ¥¢ÁµêÊûú
                                            </h3>
                                            <div style={{ fontSize: '2rem', fontWeight: '900', color: '#ec4899' }}>
                                                ¬•{searchResult.fare}
                                            </div>
                                        </div>

                                        <div style={{ 
                                            background: 'linear-gradient(to right, #fce7f3, #fef3c7)',
                                            borderRadius: '0.75rem',
                                            padding: '1rem',
                                            marginBottom: '1rem'
                                        }}>
                                            <div style={{ 
                                                display: 'flex', 
                                                justifyContent: 'space-between', 
                                                alignItems: 'center',
                                                marginBottom: '0.75rem'
                                            }}>
                                                <div style={{ fontSize: '1.25rem', fontWeight: '900', color: '#1f2937' }}>
                                                    {searchResult.from}
                                                </div>
                                                <span style={{ fontSize: '1.5rem' }}>‚Üí</span>
                                                <div style={{ fontSize: '1.25rem', fontWeight: '900', color: '#1f2937' }}>
                                                    {searchResult.to}
                                                </div>
                                            </div>
                                            
                                            {searchResult.route && searchResult.route.map((segment, idx) => (
                                                <div key={idx} className="route-line-segment" style={{ marginTop: '1rem' }}>
                                                    <div style={{ 
                                                        background: 'white',
                                                        borderRadius: '0.5rem',
                                                        padding: '0.75rem',
                                                        boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1)'
                                                    }}>
                                                        <div style={{ 
                                                            fontWeight: '900',
                                                            color: '#1d4ed8',
                                                            fontSize: '0.875rem',
                                                            marginBottom: '0.5rem'
                                                        }}>
                                                            {segment.line}
                                                        </div>
                                                        <div style={{ display: 'flex', flexWrap: 'wrap', gap: '0.5rem' }}>
                                                            {segment.stations.map((station, i) => (
                                                                <React.Fragment key={i}>
                                                                    <span style={{ 
                                                                        background: '#dbeafe',
                                                                        padding: '0.25rem 0.75rem',
                                                                        borderRadius: '9999px',
                                                                        fontSize: '0.875rem',
                                                                        fontWeight: 'bold',
                                                                        color: '#374151'
                                                                    }}>
                                                                        {station}
                                                                    </span>
                                                                    {i < segment.stations.length - 1 && (
                                                                        <span style={{ color: '#93c5fd', alignSelf: 'center' }}>‚Üí</span>
                                                                    )}
                                                                </React.Fragment>
                                                            ))}
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>

                                        <div style={{ 
                                            display: 'grid', 
                                            gridTemplateColumns: 'repeat(3, 1fr)',
                                            gap: '1rem',
                                            marginBottom: '1.5rem'
                                        }}>
                                            <div style={{ 
                                                background: '#dbeafe',
                                                borderRadius: '0.5rem',
                                                padding: '0.75rem',
                                                textAlign: 'center'
                                            }}>
                                                <div style={{ fontSize: '1.5rem', marginBottom: '0.25rem' }}>‚è±Ô∏è</div>
                                                <div style={{ fontSize: '0.75rem', fontWeight: 'bold', color: '#4b5563', marginBottom: '0.25rem' }}>
                                                    ÊâÄË¶ÅÊôÇÈñì
                                                </div>
                                                <div style={{ fontWeight: '900', color: '#1f2937' }}>
                                                    {searchResult.time}ÂàÜ
                                                </div>
                                            </div>
                                            <div style={{ 
                                                background: '#d1fae5',
                                                borderRadius: '0.5rem',
                                                padding: '0.75rem',
                                                textAlign: 'center'
                                            }}>
                                                <div style={{ fontSize: '1.5rem', marginBottom: '0.25rem' }}>üîÑ</div>
                                                <div style={{ fontSize: '0.75rem', fontWeight: 'bold', color: '#4b5563', marginBottom: '0.25rem' }}>
                                                    ‰πóÊèõ
                                                </div>
                                                <div style={{ fontWeight: '900', color: '#1f2937' }}>
                                                    {searchResult.transfers}Âõû
                                                </div>
                                            </div>
                                            <div style={{ 
                                                background: '#e9d5ff',
                                                borderRadius: '0.5rem',
                                                padding: '0.75rem',
                                                textAlign: 'center'
                                            }}>
                                                <div style={{ fontSize: '1.5rem', marginBottom: '0.25rem' }}>üìè</div>
                                                <div style={{ fontSize: '0.75rem', fontWeight: 'bold', color: '#4b5563', marginBottom: '0.25rem' }}>
                                                    ÈßÖÊï∞
                                                </div>
                                                <div style={{ fontWeight: '900', color: '#1f2937' }}>
                                                    {searchResult.distance}ÈßÖ
                                                </div>
                                            </div>
                                        </div>

                                        {/* ‰øùÂ≠ò„Éï„Ç©„Éº„É† */}
                                        <div style={{ 
                                            borderTop: '2px dashed #d1d5db',
                                            paddingTop: '1rem'
                                        }}>
                                            <label style={{ 
                                                display: 'block',
                                                fontSize: '0.875rem',
                                                fontWeight: 'bold',
                                                color: '#374151',
                                                marginBottom: '0.5rem'
                                            }}>
                                                üíæ „Åì„ÅÆÁµåË∑Ø„Å´ÂêçÂâç„Çí„Å§„Åë„Å¶‰øùÂ≠ò
                                            </label>
                                            <div style={{ display: 'flex', gap: '0.5rem' }}>
                                                <input
                                                    type="text"
                                                    value={routeName}
                                                    onChange={(e) => setRouteName(e.target.value)}
                                                    placeholder="‰æã: ÊúÄÂØÑ„ÇäÈßÖ‚ÜíÈõÜÂêàÂ†¥ÊâÄ"
                                                    style={{ flex: 1 }}
                                                />
                                                <button
                                                    onClick={handleSaveRoute}
                                                    disabled={!routeName.trim()}
                                                    style={{
                                                        background: 'linear-gradient(to right, #a855f7, #ec4899)',
                                                        color: 'white',
                                                        padding: '0.75rem 1.5rem',
                                                        borderRadius: '0.75rem',
                                                        fontWeight: '900',
                                                        border: 'none',
                                                        boxShadow: '0 10px 15px -3px rgba(0, 0, 0, 0.1)',
                                                        cursor: 'pointer',
                                                        whiteSpace: 'nowrap'
                                                    }}
                                                >
                                                    üíæ ‰øùÂ≠ò
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                    )}

                    {/* „ÇØ„Ç§„ÉÉ„ÇØÊ§úÁ¥¢„Çø„Éñ */}
                    {activeTab === 'preset' && (
                        <div className="bounce-in">
                            <div style={{ 
                                background: 'white',
                                borderRadius: '1rem',
                                padding: '1.5rem',
                                boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.25)'
                            }}>
                                <h3 style={{ 
                                    fontSize: '1.5rem', 
                                    fontWeight: '900', 
                                    color: '#1f2937',
                                    marginBottom: '1rem',
                                    display: 'flex',
                                    alignItems: 'center',
                                    gap: '0.5rem'
                                }}>
                                    ‚ö° „Ç™„Éï‰ºöÂÆöÁï™„É´„Éº„Éà
                                </h3>
                                <p style={{ color: '#4b5563', marginBottom: '1.5rem' }}>
                                    „Çà„Åè‰Ωø„ÅÜÁµåË∑Ø„Çí„ÉØ„É≥„ÇØ„É™„ÉÉ„ÇØ„ÅßÊ§úÁ¥¢„Åß„Åç„Çã„Çà
                                </p>
                                
                                <div style={{ display: 'flex', flexDirection: 'column', gap: '0.75rem' }}>
                                    {PRESET_ROUTES.map((preset, index) => (
                                        <button
                                            key={index}
                                            onClick={() => handlePresetSelect(preset)}
                                            style={{
                                                width: '100%',
                                                background: 'linear-gradient(to right, #dbeafe, #cffafe)',
                                                border: '2px solid #93c5fd',
                                                borderRadius: '0.75rem',
                                                padding: '1rem',
                                                textAlign: 'left',
                                                cursor: 'pointer',
                                                transition: 'all 0.3s'
                                            }}
                                            onMouseOver={(e) => {
                                                e.currentTarget.style.background = 'linear-gradient(to right, #bfdbfe, #a5f3fc)';
                                                e.currentTarget.style.transform = 'scale(1.05)';
                                            }}
                                            onMouseOut={(e) => {
                                                e.currentTarget.style.background = 'linear-gradient(to right, #dbeafe, #cffafe)';
                                                e.currentTarget.style.transform = 'scale(1)';
                                            }}
                                        >
                                            <div style={{ 
                                                display: 'flex',
                                                justifyContent: 'space-between',
                                                alignItems: 'center',
                                                marginBottom: '0.5rem'
                                            }}>
                                                <div style={{ fontWeight: '900', color: '#1f2937' }}>
                                                    {preset.name}
                                                </div>
                                                <span style={{ fontSize: '1.25rem', color: '#2563eb' }}>‚Üí</span>
                                            </div>
                                            <div style={{ fontSize: '0.875rem', color: '#4b5563' }}>
                                                {preset.description}
                                            </div>
                                        </button>
                                    ))}
                                </div>

                                <div style={{ 
                                    marginTop: '1.5rem',
                                    padding: '1rem',
                                    background: '#fef3c7',
                                    borderRadius: '0.75rem',
                                    border: '2px solid #fde047'
                                }}>
                                    <p style={{ fontSize: '0.875rem', fontWeight: 'bold', color: '#374151', marginBottom: '0.5rem' }}>
                                        üí° „Ç´„Çπ„Çø„É†„É´„Éº„Éà„ÇíËøΩÂä†„Åó„Åü„ÅÑÔºü
                                    </p>
                                    <p style={{ fontSize: '0.875rem', color: '#4b5563' }}>
                                        „ÄåÁµåË∑ØÊ§úÁ¥¢„Äç„Çø„Éñ„Åã„ÇâÊ§úÁ¥¢„Åó„Å¶‰øùÂ≠ò„Åô„Çã„Å®„ÄÅ„ÅÇ„Å™„ÅüÂ∞ÇÁî®„ÅÆ„É´„Éº„Éà„Åå‰øùÂ≠ò„Åï„Çå„Çã„ÇàÔºÅ
                                    </p>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* ‰øùÂ≠òÊ∏à„Åø„Çø„Éñ */}
                    {activeTab === 'saved' && (
                        <div className="bounce-in">
                            <div style={{ 
                                background: 'white',
                                borderRadius: '1rem',
                                padding: '1.5rem',
                                boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.25)'
                            }}>
                                <div style={{ 
                                    display: 'flex',
                                    justifyContent: 'space-between',
                                    alignItems: 'center',
                                    marginBottom: '1.5rem'
                                }}>
                                    <h3 style={{ 
                                        fontSize: '1.5rem', 
                                        fontWeight: '900', 
                                        color: '#1f2937',
                                        display: 'flex',
                                        alignItems: 'center',
                                        gap: '0.5rem'
                                    }}>
                                        üíæ ‰øùÂ≠òÊ∏à„ÅøÁµåË∑Ø
                                    </h3>
                                    {savedRoutes.length > 0 && (
                                        <div style={{ fontSize: '0.875rem', fontWeight: 'bold', color: '#4b5563' }}>
                                            ÂÖ®{savedRoutes.length}‰ª∂
                                        </div>
                                    )}
                                </div>

                                {savedRoutes.length === 0 ? (
                                    <div style={{ textAlign: 'center', padding: '3rem 0' }}>
                                        <div style={{ fontSize: '4rem', color: '#d1d5db', marginBottom: '1rem' }}>üíæ</div>
                                        <p style={{ color: '#6b7280', fontWeight: '500', marginBottom: '0.5rem' }}>
                                            „Åæ„Å†‰øùÂ≠òÊ∏à„Åø„ÅÆÁµåË∑Ø„Åå„Å™„ÅÑ„Çà
                                        </p>
                                        <p style={{ fontSize: '0.875rem', color: '#9ca3af' }}>
                                            „ÄåÁµåË∑ØÊ§úÁ¥¢„Äç„Åã„ÇâÊ§úÁ¥¢„Åó„Å¶‰øùÂ≠ò„Åó„Å¶„Åø„Çà„ÅÜ
                                        </p>
                                    </div>
                                ) : (
                                    <>
                                        <div style={{ display: 'flex', flexDirection: 'column', gap: '0.75rem', marginBottom: '1.5rem' }}>
                                            {savedRoutes.map((route, index) => (
                                                <div
                                                    key={route.id}
                                                    className="slide-in-left"
                                                    style={{ 
                                                        border: '2px solid #e9d5ff',
                                                        borderRadius: '0.75rem',
                                                        padding: '1rem',
                                                        transition: 'all 0.3s',
                                                        animationDelay: `${index * 0.1}s`
                                                    }}
                                                    onMouseOver={(e) => {
                                                        e.currentTarget.style.borderColor = '#c084fc';
                                                        e.currentTarget.style.boxShadow = '0 10px 15px -3px rgba(0, 0, 0, 0.1)';
                                                    }}
                                                    onMouseOut={(e) => {
                                                        e.currentTarget.style.borderColor = '#e9d5ff';
                                                        e.currentTarget.style.boxShadow = 'none';
                                                    }}
                                                >
                                                    <div style={{ 
                                                        display: 'flex',
                                                        justifyContent: 'space-between',
                                                        alignItems: 'flex-start',
                                                        marginBottom: '0.75rem'
                                                    }}>
                                                        <div style={{ flex: 1 }}>
                                                            <div style={{ 
                                                                display: 'flex',
                                                                alignItems: 'center',
                                                                gap: '0.5rem',
                                                                marginBottom: '0.5rem'
                                                            }}>
                                                                <div style={{ 
                                                                    width: '2rem',
                                                                    height: '2rem',
                                                                    background: 'linear-gradient(to bottom right, #a855f7, #ec4899)',
                                                                    borderRadius: '9999px',
                                                                    display: 'flex',
                                                                    alignItems: 'center',
                                                                    justifyContent: 'center',
                                                                    color: 'white',
                                                                    fontWeight: '900',
                                                                    fontSize: '0.875rem'
                                                                }}>
                                                                    {index + 1}
                                                                </div>
                                                                <h4 style={{ fontWeight: '900', color: '#1f2937' }}>
                                                                    {route.name}
                                                                </h4>
                                                            </div>
                                                            <div style={{ 
                                                                display: 'flex',
                                                                alignItems: 'center',
                                                                gap: '0.5rem',
                                                                color: '#374151',
                                                                fontWeight: '500'
                                                            }}>
                                                                <span>{route.from}</span>
                                                                <span style={{ color: '#a855f7' }}>‚Üí</span>
                                                                <span>{route.to}</span>
                                                            </div>
                                                        </div>
                                                        <div style={{ textAlign: 'right' }}>
                                                            <div style={{ 
                                                                fontSize: '1.5rem',
                                                                fontWeight: '900',
                                                                color: '#a855f7'
                                                            }}>
                                                                ¬•{route.fare}
                                                            </div>
                                                            <button
                                                                onClick={() => handleDeleteRoute(route.id)}
                                                                style={{
                                                                    marginTop: '0.5rem',
                                                                    color: '#ef4444',
                                                                    background: 'transparent',
                                                                    border: 'none',
                                                                    cursor: 'pointer',
                                                                    fontSize: '1.25rem'
                                                                }}
                                                            >
                                                                üóëÔ∏è
                                                            </button>
                                                        </div>
                                                    </div>

                                                    <div style={{ 
                                                        display: 'grid',
                                                        gridTemplateColumns: 'repeat(3, 1fr)',
                                                        gap: '0.5rem',
                                                        fontSize: '0.875rem'
                                                    }}>
                                                        <div style={{ 
                                                            background: '#dbeafe',
                                                            borderRadius: '0.5rem',
                                                            padding: '0.5rem',
                                                            textAlign: 'center'
                                                        }}>
                                                            <div style={{ fontWeight: 'bold', color: '#1f2937' }}>
                                                                {route.time}ÂàÜ
                                                            </div>
                                                            <div style={{ fontSize: '0.75rem', color: '#4b5563' }}>
                                                                ÊâÄË¶ÅÊôÇÈñì
                                                            </div>
                                                        </div>
                                                        <div style={{ 
                                                            background: '#d1fae5',
                                                            borderRadius: '0.5rem',
                                                            padding: '0.5rem',
                                                            textAlign: 'center'
                                                        }}>
                                                            <div style={{ fontWeight: 'bold', color: '#1f2937' }}>
                                                                {route.transfers}Âõû
                                                            </div>
                                                            <div style={{ fontSize: '0.75rem', color: '#4b5563' }}>
                                                                ‰πóÊèõ
                                                            </div>
                                                        </div>
                                                        <div style={{ 
                                                            background: '#e9d5ff',
                                                            borderRadius: '0.5rem',
                                                            padding: '0.5rem',
                                                            textAlign: 'center'
                                                        }}>
                                                            <div style={{ fontWeight: 'bold', color: '#1f2937' }}>
                                                                {route.distance}ÈßÖ
                                                            </div>
                                                            <div style={{ fontSize: '0.75rem', color: '#4b5563' }}>
                                                                ÈßÖÊï∞
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div style={{ 
                                                        marginTop: '0.75rem',
                                                        paddingTop: '0.75rem',
                                                        borderTop: '1px solid #e5e7eb'
                                                    }}>
                                                        <div style={{ 
                                                            fontSize: '0.75rem',
                                                            fontWeight: 'bold',
                                                            color: '#4b5563',
                                                            marginBottom: '0.25rem'
                                                        }}>
                                                            {route.line}
                                                        </div>
                                                        <div style={{ fontSize: '0.75rem', color: '#6b7280' }}>
                                                            ‰øùÂ≠òÊó•ÊôÇ: {new Date(route.createdAt).toLocaleString('ja-JP')}
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>

                                        {/* ÂêàË®àË°®Á§∫ */}
                                        <div style={{ 
                                            background: 'linear-gradient(to right, #a855f7, #ec4899)',
                                            borderRadius: '1rem',
                                            padding: '1.5rem',
                                            color: 'white',
                                            boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.25)'
                                        }}>
                                            <div style={{ 
                                                display: 'flex',
                                                justifyContent: 'space-between',
                                                alignItems: 'center'
                                            }}>
                                                <div>
                                                    <div style={{ 
                                                        fontSize: '0.875rem',
                                                        fontWeight: 'bold',
                                                        opacity: 0.9,
                                                        marginBottom: '0.25rem'
                                                    }}>
                                                        ‰øùÂ≠òÊ∏à„ÅøÁµåË∑Ø„ÅÆÂêàË®àÈÅãË≥É
                                                    </div>
                                                    <div style={{ fontSize: '2.5rem', fontWeight: '900' }}>
                                                        ¬•{totalSavedFare}
                                                    </div>
                                                    <div style={{ fontSize: '0.875rem', opacity: 0.75, marginTop: '0.25rem' }}>
                                                        ÂÖ®{savedRoutes.length}‰ª∂„ÅÆÁµåË∑Ø
                                                    </div>
                                                </div>
                                                <div style={{ fontSize: '4rem' }}>üí∞</div>
                                            </div>
                                        </div>
                                    </>
                                )}
                            </div>
                        </div>
                    )}

                    {/* „Éï„ÉÉ„Çø„Éº */}
                    <div style={{ marginTop: '3rem', textAlign: 'center', opacity: 0.6 }}>
                        <p style={{ fontSize: '0.875rem', fontWeight: '500', color: '#4b5563' }}>
                            Ê•Ω„Åó„ÅÑ„Ç™„Éï‰ºö„Å´„Å™„Çä„Åæ„Åô„Çà„ÅÜ„Å´ üéä
                        </p>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
