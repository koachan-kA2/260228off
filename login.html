<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ãƒ­ã‚°ã‚¤ãƒ³</title>
</head>
<body>

<h2>ãƒ­ã‚°ã‚¤ãƒ³</h2>

<input type="email" id="email" placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹">
<br>
<input type="password" id="password" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰">
<br><br>

<button id="loginBtn">ãƒ­ã‚°ã‚¤ãƒ³</button>

<div style="margin-top:16px; text-align:center;">
  <a href="signup.html">æ–°è¦ç™»éŒ²ã¯ã“ã¡ã‚‰</a><br>
  <a href="reset.html">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¿˜ã‚ŒãŸæ–¹</a>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyA5KQPd73BJS7k6ueZP8KjyEz78LQfhzek",
  authDomain: "offline-meet-up.firebaseapp.com",
  projectId: "offline-meet-up",
  storageBucket: "offline-meet-up.firebasestorage.app",
  messagingSenderId: "834362010778",
  appId: "1:834362010778:web:4af33334a26024f3cfc323"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

loginBtn.onclick = async () => {
  try {
    const result = await signInWithEmailAndPassword(
      auth,
      email.value,
      password.value
    );

    if (!result.user.emailVerified) {
      await signOut(auth);
      alert("ãƒ¡ãƒ¼ãƒ«ç¢ºèªãŒå®Œäº†ã—ã¦ã„ã¾ã›ã‚“ğŸ“©\nç¢ºèªãƒ¡ãƒ¼ãƒ«ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã­");
      return;
    }

    location.href = "index.html";
  } catch (e) {
    alert("ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‹ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™");
  }
};
</script>

</body>
</html>
