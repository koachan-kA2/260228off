<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>OMS ãƒ­ã‚°ã‚¤ãƒ³</title>
</head>
<body>

<h2>OMS ãƒ­ã‚°ã‚¤ãƒ³</h2>

<input type="email" id="email" placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹"><br>
<input type="password" id="password" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰"><br><br>

<button id="loginBtn">ãƒ­ã‚°ã‚¤ãƒ³</button>

<p>
<a href="signup.html">æ–°è¦ç™»éŒ²</a><br>
<a href="reset.html">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¿˜ã‚ŒãŸ</a>
</p>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";

const app = initializeApp({
  apiKey: "AIzaSyA5KQPd73BJS7k6ueZP8KjyEz78LQfhzek",
  authDomain: "offline-meet-up.firebaseapp.com",
  projectId: "offline-meet-up",
  storageBucket: "offline-meet-up.appspot.com",
  messagingSenderId: "834362010778",
  appId: "1:834362010778:web:4af33334a26024f3cfc323"
});

const auth = getAuth(app);

loginBtn.onclick = async () => {
  try {
    const res = await signInWithEmailAndPassword(auth, email.value, password.value);
    if (!res.user.emailVerified) return await signOut(auth), alert("ãƒ¡ãƒ¼ãƒ«ç¢ºèªã—ã¦ã­ğŸ“©");
    location.href = "index.html";
  } catch {
    alert("ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‹ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã†ã‚ˆ");
  }
};
</script>

</body>
</html>
