<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ãƒ­ã‚°ã‚¤ãƒ³ï½œOMS</title>
</head>
<body>

<h2>ãƒ­ã‚°ã‚¤ãƒ³</h2>

<input type="email" id="email" placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹"><br><br>
<input type="password" id="password" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰"><br><br>

<button id="loginBtn">ãƒ­ã‚°ã‚¤ãƒ³</button>

<p>
  <a href="signup.html">æ–°è¦ç™»éŒ²</a>
</p>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyA5KQPd73BJS7k6ueZP8KjyEz78LQfhzek",
  authDomain: "offline-meet-up.firebaseapp.com",
  projectId: "offline-meet-up",
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

loginBtn.onclick = async () => {
  try {
    const result = await signInWithEmailAndPassword(
      auth,
      email.value,
      password.value
    );

    if (!result.user.emailVerified) {
      await signOut(auth);
      alert("ãƒ¡ãƒ¼ãƒ«ç¢ºèªãŒã¾ã ã ã‚ˆğŸ“©\nç¢ºèªå¾Œã«ã‚‚ã†ä¸€åº¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã­ï¼");
      return;
    }

    location.href = "index.html";

  } catch {
    alert("ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‹ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™");
  }
};
</script>

</body>
</html>
